var hiList={};hiList.baseExtension=function(){this.$preTransform=function(e,t){},this.$beforeFilter=function(e,t,i,a){},this.$beforeDisplay=function(e,t,i){},this.$startup=function(){}},hiList.extensions={},hiList.extend=function(e){var t=new hiList.baseExtension,i=e.call({},t);if(!i.hasOwnProperty("build")||!i.hasOwnProperty("name"))throw new Error("A hiList extension should contains at least the name property and the build function");i.$newInstance=function(){if(i.hasOwnProperty("inject")){var e=i.build;return e.$inject=i.inject,angular.injector().invoke(e)}return i.build.call({})},hiList.extensions[i.name]=i},hiList.getExtension=function(e){if(!hiList.extensions.hasOwnProperty(e))throw new Error("Extension not encountered : "+e);var t=hiList.extensions[e];return t.hasOwnProperty("singleton")?t.hasOwnProperty("instance")?t.instance:(t.instance=t.$newInstance(),t.instance.$startup(),hiList[e]=t,t.instance):((t=t.$newInstance()).$startup(),t)},hiList.extend(function(e){return{name:"name1",singleton:!1,build:function(){return e.$startup=function(e){console.log("I'm just a stupid extension")},e.transformRepeatable=function(e,t,i){},e.transformHtml=function(e,t,i){},e.preFetch=function(e,t){},e.postFetch=function(e,t){},e.fetchFail=function(e,t,i){},e.fetchFinished=function(e){},e.invalidResult=function(e){},e.apiSetup=function(e,t){},e}}}),hiList.html={},hiList.html.header="<div></div>",hiList.html.footer='<nav class="col-md-12 col-lg-12 col-sm-12 text-center" ng-show="!$empty&&!$failed"><ul class="pagination"><li><a  ng-click="goToPreviousPage()" href="javascript:void(0)" aria-label="Previous"><span aria-hidden="true"><b translate>Previous</b></span></a></li><li ng-class=\'{"active":activePage==page}\' ng-click="activatePage(page)" ng-repeat="page in pagesVisible"><a href="javascript:void(0)">{{page}}</a></li><li><a ng-click="goToNextPage()" href="javascript:void(0)" aria-label="Next"><span aria-hidden="true"><b translate>Next</b></span></a></li></ul></nav>',hiList.html.empty="<h3>The list is empty for now</h3>",hiList.html.fail="<h4>The list request failed</h4>",hiList.html.delaying="<h5>The server is delaying</h5>",hiList.utils={},hiList.utils.getFrontierAction=function(url){var dotIndex=url.indexOf(".");if(-1!=dotIndex){var controller=url.substr(0,dotIndex),action=url.substr(dotIndex+1,url.length);try{var functionResolved=eval(controller+"."+action);return"function"==typeof functionResolved&&functionResolved}catch(e){return!1}}},hiList.utils.generatePagesSequence=function(e){for(var t=[],i=1;i<=e;)t.push(i),i++;return t},hiList.directive=function(e,t){var i={};return i.restrict="E",i.scope=!0,i.link=function(i,a,n){if(i.maxItemsOptions=[25,50,150,200],i.show={maxItems:25},i.activePage=1,i.ordering={empty:!0},i.activePageIndex=0,i.maxVisiblePages=6,i.pages=[],i.pagesVisible=[],i.activatePage=function(e){i.activePage=e;var t=i.activePage;if(t>1){var a=i.pagesVisible.indexOf(t);if(-1==a)i.$pages.notVisible(t);else{var n=i.pagesVisible.indexOf(i.pagesVisible[i.pagesVisible.length-1]),s=i.pages.indexOf(i.pagesVisible[i.pagesVisible.length-1]),r=i.pages.indexOf(i.pagesVisible[0]),o=i.pages.length-1,l=n/2;a>l?i.$pages.left(a,n,o,s):a<l&&i.$pages.right(a,n,r)}}i.$doFilter(e)},i.$hide={},i.$show={},i.show.maxItemsOptions=!0,i.$elements={},i.$failed=!1,i.$empty=!1,i.$delaying=!1,i.$filterInProgress=!1,i.$pages={},i.callExtensions=function(e,t){for(var a in i.$extensions){var n=i.$extensions[a];"object"==typeof n&&(n.hasOwnProperty(e)&&n[e].apply(n,t))}},i.$pages.createPagesList=function(e){i.pages=hiList.utils.generatePagesSequence(e);var t=0,a=[];i.pages.forEach(function(e,n){t!=i.maxVisiblePages&&(a.push(e),t++)}),i.pagesVisible=a,i.activePage=1},i.$pages.right=function(e,t,a){var n=a-1;if(0==a);else if(0!=a){var s=i.pages[n],r=angular.copy(i.pagesVisible);r.splice(r.length-1,1),r.unshift(s),i.pagesVisible=r}},i.$pages.left=function(e,t,a,n){var s=n+1;if(a==n);else if(n!=a){var r=i.pages[s],o=angular.copy(i.pagesVisible);o.splice(0,1),o.push(r),i.pagesVisible=o}},i.$pages.notVisible=function(e){var t=0,a=1,n=!1,s=i.pages.indexOf(e),r=i.pages.length-1,o=i.maxVisiblePages;0==s?(t=s,a=1):s==r?(t=s,a=0,n=!0):-1==i.pages.indexOf(r)?(t=s+1,a=0,n=!0):(t=s-1,a=1);for(var l=0,c=[],h=t;l<o&&!(h>r||h<0);)c.push(i.pages[h]),a>0?h++:h--,l++;n&&c.reverse(),i.pagesVisible=c,i.$applyAsync()},i.$processResult=function(e){if("object"!=typeof e)return i.pagesVisible=[],i.callExtensions("invalidResult",[i]),void console.error("Invalid result returned by "+i.$attributes.name+" data source");if(!(e.hasOwnProperty("data")&&e.hasOwnProperty("totalRowsMatch")&&e.hasOwnProperty("pageNumber")&&e.hasOwnProperty("totalPagesMatch")))return i.pagesVisible=[],i.callExtensions("invalidResult",[i]),void console.error("Invalid result returned by "+i.$attributes.name+" data source");0==e.data.length||0==e.totalPagesMatch?(i.$empty=!0,i.pagesVisible=[],i.rows=[]):i.$empty=!1,i.$handlers.postFetch&&i.$handlers.postFetch(i,{result:e}),i.callExtensions("postFetch",[i,e]),i.rows=e.data,i.previousPage=i.activePage,i.activePage=e.pageNumber,i.totalPages=e.totalPagesMatch,i.totalRowsMatch=e.totalRowsMatch;var t=i.activePage;i.$pages.createPagesList(e.totalPagesMatch),i.activePage=t},i.$delay=300,i.$delayTimeout=!1,i.$doFilter=function(e){i.$delayTimeout&&clearTimeout(i.$delayTimeout),i.$delayTimeout=setTimeout(function(){i.$delaying=!0,i.$applyAsync()},i.$delay),i.$failed=!1,"function"!=typeof i.$ds&&console.error("Cant proceed with filtering : invalid list data-source"),i.$filterInProgress||(i.$filterInProgress=!0);var t=i.activePage;void 0!==e&&(t=e);var a=i.show.maxItems,n=i.ordering;i.$handlers.preFetch&&i.$handlers.preFetch(i,{filter:i.filter}),i.callExtensions("preFetch",[i,i.filter]),i.$ds.call({},t,a,i.filter,n).try(function(e){i.$processResult(e),i.activePage=t,i.ready&&i.publishStatus()}).catch(function(e){452!=e&&(i.$handlers.onFail&&i.$handlers.onFail(i,{err:e}),i.callExtensions("fetchFail",[i]),i.pagesVisible=[],i.$failed=!0,i.rows=[],console.error("Datasource frontier request failed for ["+i.$attributes.name+"] List."),console.error(e))}).finally(function(){i.ready||(void 0!==i.$readinessCallback&&i.$readinessCallback.apply(),i.ready=!0),i.callExtensions("fetchFinished",[i]),i.$delaying=!1,clearTimeout(i.$delayTimeout),i.$filterInProgress&&(i.$filterInProgress=!1),i.$applyAsync()})},i.refresh=function(e){return e?i.activatePage(i.activePage):i.activatePage(1)},i.goToPage=function(e){if(-1==i.pages.indexOf(e))throw new Error("Invalid page number : "+e+".");i.activatePage(e)},i.goToLastPage=function(){0!=i.pages.length&&this.goToPage(i.pages[i.pages.length-1])},i.goToFirstPage=function(){i.pages.length>0&&i.goToPage(i.pages[0])},i.getCurrentPage=function(){return i.activePage},i.goToNextPage=function(){var e=i.activePage+1;-1!=i.pages.indexOf(e)&&i.goToPage(e)},i.goToPreviousPage=function(){var e=i.activePage-1;-1!=i.pages.indexOf(e)&&i.goToPage(e)},i.$extensions={},i.$extensionList=[],i.$bootExtensions=function(){var e=[];if(n.hasOwnProperty("extensions")&&(e=n.extensions.split(" ")),e.length>0){i.$extensionList=e;for(var t in e){var a=e[t];if("string"==typeof a){var s=hiList.getExtension(a);i.$extensions[a]=s}}}},i.$bootExtensions(),!n.hasOwnProperty("name"))throw new Error("The list element should have a <name> attribute");if(!n.hasOwnProperty("repeatElement"))throw new Error("The list element should have a <repeat-element> attribute that specifies the element that should be repeated.");if(!n.hasOwnProperty("each"))throw new Error("The list element should have a <item> attribute that specifies the name to repeat");if(!n.hasOwnProperty("src"))throw new Error("The list element should have a <src> attribute that specifies the data source.");if(n.hasOwnProperty("perPage")){var s=parseInt(n.perPage);if(!isNaN(s)){if(s<=1)throw new Error("Invalid max items per page. Should be higher than 1");-1==i.maxItemsOptions.indexOf(s)&&i.maxItemsOptions.unshift(s),i.show.maxItems=s}}var r=n.src,o=hiList.utils.getFrontierAction(r);if(void 0===o)throw new Error("Invalid list data source value format : "+r);if(!o)throw new Error("Data source could not be found. Make sure it was properly created and is available : "+r);i.$ds=o;var l=n.each,c=i.$parent,h=n.name,p=n.repeatElement,u=a.find(p);if(0==u.length)throw new Error("Repeatable element could not be found using the specifiend jQuery selector : "+p);if(c.hasOwnProperty(h)&&console.warn("The list name <"+h+"> is already in use on its parent scope"),i.$attributes=n,n.hasOwnProperty("delay")){var f=n.delay;try{i.$delay=parseInt(f)}catch(e){throw new Error("Invalid delay detect time : "+f)}}if(i.publishStatus=function(){if(void 0!==i.$listWatcher){var e={};e.page=i.activePage,e.filter=i.filter,e.pageSize=i.show.maxItems,i.$listWatcher(i,{status:e})}},i.filter={},i.$handlers={},i.$listWatcher=void 0,i.$listInitializer=void 0,i.$readinessCallback=void 0,i.$initialize=function(){if(void 0!==i.$listInitializer){var e={page:1,pageSize:i.show.maxItems,filter:i.filter};e.ready=function(e){if("function"!=typeof e)throw new Error("ready callback must be a function");i.$readinessCallback=e},i.$listInitializer(i,{context:e}),i.show.maxItems=e.pageSize,i.filter=e.filter,i.$doFilter(e.page)}else i.$doFilter(1)},n.hasOwnProperty("watcher")){var g=n.watcher;i.$listWatcher=t(g)}if(n.hasOwnProperty("initializer")){var d=n.initializer;i.$listInitializer=t(d)}if(n.hasOwnProperty("prefetch")){var v=n.prefetch;i.$handlers.preFetch=t(v)}if(n.hasOwnProperty("onfail")){var m=n.onfail,P=t(m);i.$handlers.onFail=P}if(n.hasOwnProperty("postfetch")){var y=n.postfetch,P=t(y);i.$handlers.postFetch=P}var w={repeatable:u};i.callExtensions("transformRepeatable",[i,n,w]),(u=w.repeatable).attr("ng-repeat",l+" in rows");var b=$("<header>").addClass("row hilist-header").html(hiList.html.header);$(a).prepend(b);var x=$("<footer>").addClass("row hilist-footer").html(hiList.html.footer);$(a).append(x);var O=$(a).html();w={html:O},i.callExtensions("transformHtml",[i,n,w]),O=w.html;var I=angular.element(O),L=e(I,function(){});a.html(I),i.callExtensions("apiSetup",[i,n]),c[h]=i,L(i),i.$initialize()},i.$inject=["$scope","element","attributes"],i},hiList.directive.$inject=["$compile","$parse"],Hi.$ui.js.component("list",hiList.directive);