var hiList={};hiList.baseExtension=function(){this.$preTransform=function(e,t){},this.$beforeFilter=function(e,t,a,i){},this.$beforeDisplay=function(e,t,a){},this.$startup=function(){}},hiList.extensions={},hiList.extend=function(e){var t=new hiList.baseExtension,a=e.call({},t);if(!a.hasOwnProperty("build")||!a.hasOwnProperty("name"))throw new Error("A hiList extension should contains at least the name property and the build function");a.$newInstance=function(){if(a.hasOwnProperty("inject")){var e=a.build;return e.$inject=a.inject,angular.injector().invoke(e)}return a.build.call({})},hiList.extensions[a.name]=a},hiList.getExtension=function(e){if(!hiList.extensions.hasOwnProperty(e))throw new Error("Extension not encountered : "+e);var t=hiList.extensions[e];if(t.hasOwnProperty("singleton"))return t.hasOwnProperty("instance")?t.instance:(t.instance=t.$newInstance(),t.instance.$startup(),hiList[e]=t,t.instance);var t=t.$newInstance();return t.$startup(),t},hiList.extend(function(e){return{name:"name1",singleton:!1,build:function(){return e.$startup=function(e){console.log("I'm just a stupid extension")},e.transformRepeatable=function(e,t,a){},e.transformHtml=function(e,t,a){},e.preFetch=function(e,t){},e.postFetch=function(e,t){},e.fetchFail=function(e,t,a){},e.fetchFinished=function(e){},e.invalidResult=function(e){},e.apiSetup=function(e,t){},e}}}),hiList.html={},hiList.html.header="<div></div>",hiList.html.footer='<nav class="col-md-12 col-lg-12 col-sm-12 text-center" ng-show="!$empty"><ul class="pagination"><li><a  ng-click="goToPreviousPage()" href="#" aria-label="Previous"><span aria-hidden="true"><b translate>Previous</b></span></a></li><li ng-class=\'{"active":activePage==page}\' ng-click="activatePage(page)" ng-repeat="page in pagesVisible"><a href="#">{{page}}</a></li><li><a ng-click="goToNextPage()" href="#" aria-label="Next"><span aria-hidden="true"><b translate>Next</b></span></a></li></ul></nav>',hiList.html.empty="<h3>The list is empty for now</h3>",hiList.html.fail="<h4>The list request failed</h4>",hiList.html.delaying="<h5>The server is delaying</h5>",hiList.utils={},hiList.utils.getFrontierAction=function(url){var dotIndex=url.indexOf(".");if(-1==dotIndex)return void 0;var controller=url.substr(0,dotIndex),action=url.substr(dotIndex+1,url.length);try{var functionResolved=eval(controller+"."+action);return"function"!=typeof functionResolved?!1:functionResolved}catch(err){return!1}},hiList.utils.generatePagesSequence=function(e){for(var t=[],a=1;e>=a;)t.push(a),a++;return t},hiList.directive=function(e,t){var a={};return a.restrict="E",a.scope=!0,a.link=function(a,i,n){if(a.maxItemsOptions=[25,50,150,200],a.show={maxItems:25},a.activePage=1,a.ordering={empty:!0},a.activePageIndex=0,a.maxVisiblePages=6,a.pages=[],a.pagesVisible=[],a.activatePage=function(e){a.activePage=e;var t=a.activePage;if(t>1){var i=a.pagesVisible.indexOf(t);if(-1==i)a.$pages.notVisible(t);else{var n=a.pagesVisible.indexOf(a.pagesVisible[a.pagesVisible.length-1]),s=a.pages.indexOf(a.pagesVisible[a.pagesVisible.length-1]),r=a.pages.indexOf(a.pagesVisible[0]),o=a.pages.length-1,l=n/2;i>l?a.$pages.left(i,n,o,s):l>i&&a.$pages.right(i,n,r)}}a.$doFilter(e)},a.$watch("filter.text",function(e,t){a.$doFilter(1)}),a.$watch("show.maxItems",function(e,t){a.$doFilter(1)}),a.$hide={},a.$show={},a.show.maxItemsOptions=!0,a.$elements={},a.$failed=!1,a.$empty=!1,a.$delaying=!1,a.$filterInProgress=!1,a.$pages={},a.callExtensions=function(e,t){for(var i in a.$extensions){var n=a.$extensions[i];"object"==typeof n&&n.hasOwnProperty(e)&&n[e].apply(n,t)}},a.$pages.createPagesList=function(e){a.pages=hiList.utils.generatePagesSequence(e);var t=0,i=[];a.pages.forEach(function(e,n){t!=a.maxVisiblePages&&(i.push(e),t++)}),a.pagesVisible=i,a.activePage=1},a.$pages.right=function(e,t,i){var n=i-1;if(0==i);else if(0!=i){var s=a.pages[n],r=angular.copy(a.pagesVisible);r.splice(r.length-1,1),r.unshift(s),a.pagesVisible=r}},a.$pages.left=function(e,t,i,n){var s=n+1;if(i==n);else if(n!=i){var r=a.pages[s],o=angular.copy(a.pagesVisible);o.splice(0,1),o.push(r),a.pagesVisible=o}},a.$pages.notVisible=function(e){var t=0,i=1,n=!1,s=a.pages.indexOf(e),r=a.pages.length-1,o=a.maxVisiblePages;0==s?(t=s,i=1):s==r?(t=s,i=0,n=!0):-1==a.pages.indexOf(r)?(t=s+1,i=0,n=!0):(t=s-1,i=1);for(var l=0,c=[],h=t;o>l&&!(h>r||0>h);)c.push(a.pages[h]),i>0?h++:h--,l++;n&&c.reverse(),a.pagesVisible=c,a.$applyAsync()},a.$processResult=function(e){if("object"!=typeof e)return a.pagesVisible=[],a.callExtensions("invalidResult",[a]),void console.error("Invalid result returned by "+a.$attributes.name+" data source");if(!(e.hasOwnProperty("data")&&e.hasOwnProperty("totalRowsMatch")&&e.hasOwnProperty("pageNumber")&&e.hasOwnProperty("totalPagesMatch")))return a.pagesVisible=[],a.callExtensions("invalidResult",[a]),void console.error("Invalid result returned by "+a.$attributes.name+" data source");0==e.data.length||0==e.totalPagesMatch?(a.$empty=!0,a.pagesVisible=[],a.rows=[]):a.$empty=!1,a.$handlers.postFetch&&a.$handlers.postFetch(a,{result:e}),a.callExtensions("postFetch",[a,e]),a.rows=e.data,a.previousPage=a.activePage,a.activePage=e.pageNumber,a.totalPages=e.totalPagesMatch,a.totalRowsMatch=e.totalRowsMatch;var t=a.activePage;1==t&&(a.$pages.createPagesList(e.totalPagesMatch),a.activePage=1)},a.$delay=300,a.$delayTimeout=!1,a.$doFilter=function(e){a.$delayTimeout&&clearTimeout(a.$delayTimeout),a.$delayTimeout=setTimeout(function(){a.$delaying=!0,a.$applyAsync()},a.$delay),a.$failed=!1,"function"!=typeof a.$ds&&console.error("Cant proceed with filtering : invalid list data-source"),a.$filterInProgress||(a.$filterInProgress=!0);var t=a.activePage;"undefined"!=typeof e&&(t=e);var i=a.show.maxItems,n=a.ordering;a.$handlers.preFetch&&a.$handlers.preFetch(a,{filter:a.filter}),a.callExtensions("preFetch",[a,a.filter]),a.$ds.call({},t,i,a.filter,n)["try"](function(e){a.$processResult(e),a.activePage=t})["catch"](function(e){a.callExtensions("fetchFail",[a]),a.pagesVisible=[],a.$failed=!0,a.rows=[],console.error("Datasource frontier request failed for "+a.$attributes.name+".")})["finally"](function(){a.callExtensions("fetchFinished",[a]),a.$delaying=!1,clearTimeout(a.$delayTimeout),a.$filterInProgress&&(a.$filterInProgress=!1),a.$apply()})},a.refresh=function(){a.activatePage(a.activePage)},a.goToPage=function(e){var t=a.pages.indexOf(e);if(-1==t)throw new Error("Invalid page number : "+e+".");a.activatePage(e)},a.goToLastPage=function(){0!=a.pages.length&&this.goToPage(a.pages[a.pages.length-1])},a.goToFirstPage=function(){a.pages.length>0&&a.goToPage(a.pages[0])},a.getCurrentPage=function(){return a.activePage},a.goToNextPage=function(){var e=a.activePage+1;-1!=a.pages.indexOf(e)&&a.goToPage(e)},a.goToPreviousPage=function(){var e=a.activePage-1;-1!=a.pages.indexOf(e)&&a.goToPage(e)},a.$extensions={},a.$extensionList=[],a.$bootExtensions=function(){var e=[];if(n.hasOwnProperty("extensions")){var t=n.extensions;e=t.split(" ")}if(e.length>0){a.$extensionList=e;for(var i in e){var s=e[i];if("string"==typeof s){var r=hiList.getExtension(s);a.$extensions[s]=r}}}},a.$bootExtensions(),!n.hasOwnProperty("name"))throw new Error("The list element should have a <name> attribute");if(!n.hasOwnProperty("repeatElement"))throw new Error("The list element should have a <repeat-element> attribute that specifies the element that should be repeated.");if(!n.hasOwnProperty("each"))throw new Error("The list element should have a <item> attribute that specifies the name to repeat");if(!n.hasOwnProperty("src"))throw new Error("The list element should have a <src> attribute that specifies the data source.");if(n.hasOwnProperty("perPage")){var s=parseInt(n.perPage);if(!isNaN(s)){if(1>=s)throw new Error("Invalid max items per page. Should be higher than 1");-1==a.maxItemsOptions.indexOf(s)&&a.maxItemsOptions.unshift(s),a.show.maxItems=s}}var r=n.src,o=hiList.utils.getFrontierAction(r);if("undefined"==typeof o)throw new Error("Invalid list data source value format : "+r);if(!o)throw new Error("Data source could not be found. Make sure it was properly created and is available : "+r);a.$ds=o;var l=n.each,c=a.$parent,h=n.name,p=n.repeatElement,u=i.find(p);if(0==u.length)throw new Error("Repeatable element could not be found using the specifiend jQuery selector : "+p);if(c.hasOwnProperty(h)&&console.warn("The list name <"+h+"> is already in use on its parent scope"),a.$attributes=n,n.hasOwnProperty("delay")){var g=n.delay;try{a.$delay=parseInt(g)}catch(f){throw new Error("Invalid delay detect time : "+g)}}if(a.filter={text:""},a.$handlers={},n.hasOwnProperty("prefetch")){var d=n.prefetch,v=t(d);a.$handlers.preFetch=v}if(n.hasOwnProperty("postfetch")){var d=n.postfetch,v=t(d);a.$handlers.postFetch=v}var m={repeatable:u};a.callExtensions("transformRepeatable",[a,n,m]),u=m.repeatable,u.attr("ng-repeat",l+" in rows");var P=$("<header>").addClass("row hilist-header").html(hiList.html.header);$(i).prepend(P);var w=$("<footer>").addClass("row hilist-footer").html(hiList.html.footer);$(i).append(w);var y=$(i).html();m={html:y},a.callExtensions("transformHtml",[a,n,m]),y=m.html;var b=angular.element(y),x=e(b,function(){});i.html(b),a.callExtensions("apiSetup",[a,n]),c[h]=a,x(a)},a},Hi.$ui.js.component("list",hiList.directive);